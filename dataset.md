**ОПИСАТЕЛЬНАЯ ХАРАКТЕРИСТИКА ДАННЫХ**

**Новые данные**

**Цель сокращения выборки**: Для упрощения вычислений и ускорения работы с моделями временных рядов было выбрано 50 тикеров из общего набора из 1000. Это позволило сосредоточиться на ключевых данных и протестировать методику прогнозирования на ограниченной, но репрезентативной выборке.  

**Критерий выбора**:  
   - **Простота реализации**: Первые 50 тикеров в порядке их расположения в наборе данных.  
   - **Универсальность**: Нет дополнительной фильтрации, что позволяет сохранить репрезентативность начального набора.   

**Преимущества подхода**:  
   - Быстрое развертывание методов анализа и прогнозирования.  
   - Легкость воспроизведения результатов для проверки и публикации.  
   - Возможность масштабирования моделей на весь набор данных после тестирования.

**Практическая цель**: Данный выбор оптимален для подготовки публикации на сервисах, так как упрощает обработку данных и демонстрацию результатов на первой итерации.

### Описание данных

1. **Размер общих данных**:  

   - **Количество тикеров**: 1004.  

   - **Количество строк (наблюдений)**: более 1 миллиона значений в каждой переменной.


2. **Изначальный файл `daily_bars` содержит следующие колонки**:  

   - `ticker_id` — уникальный идентификатор тикера.  

   - `ticker` — название тикера (уникальный код компании).  

   - `datavendor_id` — идентификатор поставщика данных.  

   - `open` — цена открытия.  

   - `high` — максимальная цена за торговый день.  

   - `low` — минимальная цена за торговый день.  

   - `close` — цена закрытия.  

   - `volume` — объем торгов (количество акций).  

   - `turnover` — оборот (стоимость всех сделок за день).  

   - `adjusted_close` — цена закрытия с учетом корпоративных событий (дивиденды, сплиты и т. д.).  



---



### Анализ и обработка данных



#### **1. Загрузка и предварительная обработка**

- Загружены исходные данные из файла `daily_bars.csv`.  

- Объем данных: более 1 миллиона строк.  

- Проверена целостность данных (наличие пропусков, дубликатов и др.).  



---



#### **2. Ресемплирование данных**

- Для анализа выбрана переменная `adjusted_close`.  

- Выполнено **ресемплирование по неделям** для каждого из 1004 тикеров:

  - Среднее значение `adjusted_close` за неделю.  

  - Итог: **weekly_data_dict** — словарь с 1004 временными рядами.  



---



#### **3. Проверка на пропуски и выбросы**

- Пропуски устранены с помощью линейной интерполяции (`method='linear'`).  

- Выбросы определены по межквартильному размаху (IQR).  

  - Пример: для одного тикера \( Q1 = 50, Q3 = 150, IQR = 100, \text{границы} = [50 - 1.5 \times IQR, 150 + 1.5 \times IQR] = [-100, 300] \).  

  - Выбросы составили менее 2% от общего числа значений.



---



#### **4. Построение модели ARIMA**

1. **Выбор тикера для анализа**:  

   Проведен анализ временных рядов для нескольких тикеров.  

   Например, выбран тикер `XYZ` с временным рядом из ~520 недельных значений.  



2. **Стационаризация данных**:  

   - Проверен ряд на стационарность с помощью теста ADF:

     - \( p \)-значение < 0.05, ряд нестационарен.  

   - Применено дифференцирование первого порядка.



3. **Определение параметров модели ARIMA**:  

   - Использованы функции ACF и PACF для выбора параметров \( p, d, q \):  

     - \( p = 1 \) (автокорреляция с 1 лагом).  

     - \( d = 1 \) (дифференцирование 1-го порядка).  

     - \( q = 1 \) (средняя ошибка).  



4. **Обучение модели**:  

   - Обучение на тренировочной выборке (80% данных).  

   - Остатки распределены нормально, нет автокорреляции.  



5. **Прогнозирование**:  

   - Прогноз сделан на 20% тестовых данных.  

   - Итог: \( \text{MAE} = 2.56, \text{RMSE} = 3.1 \).  



---



#### **5. Восстановление исходных значений**

- Дифференцированные прогнозы преобразованы обратно в цены `adjusted_close`.  

- Использовано кумулятивное сложение.  

- Построены графики с фактическими и прогнозными значениями для сопоставления.  



---



#### **6. Результаты анализа**

- Итоговая модель ARIMA показала высокую точность для тестовых данных.  

- Построены временные ряды для всех 1004 тикеров, доступны для дальнейшего анализа и визуализации.  

- Прогнозы показали небольшие отклонения (менее 3%) для большинства тикеров.  

--- 

#### **Выводы**

Модель ARIMA хорошо подходит для анализа временных рядов цен акций. После восстановления прогнозов дифференцированных данных, результаты наглядно показывают точность предсказаний.




**Старые данные**


### Общая информация

**Название проекта:** Анализ влияния макроэкономических показателей на активы и прогнозирование цен  

**Источник данных (активы):** Yahoo Finance API  

**Источник данных (макроэкономические данные):** FRED API (Federal Reserve Economic Data)  

**Количество активов (тикеров):** 39  

**Типы активов:** Акции, товары, индексы, облигации, валюты  

**Таймфрейм данных:** Дневной (с 1990-01-01 по текущую дату)  

**Формат данных:** Онлайн  

**Ссылка на данные в формате .ipynb:** [Онлайн](https://github.com/apukhaevaa/team74_stock_price_forecasting/blob/main/initial/2_checkpoint.ipynb)

---



### Описание признаков активов



Каждая строка датасета представляет данные по одному активу на одну дату. Признаки включают следующую информацию:



| Признак       | Тип данных | Описание                                                                                   |
|---------------|------------|--------------------------------------------------------------------------------------------|
| Date          | datetime   | Дата торговой сессии в формате YYYY-MM-DD                                                  |
| Open          | float      | Цена открытия актива на начало торгового дня                                               |
| High          | float      | Максимальная цена актива за день                                                           |
| Low           | float      | Минимальная цена актива за день                                                            |
| Close         | float      | Цена закрытия актива в конце торгового дня                                                 |
| Adj Close     | float      | Цена закрытия актива в конце торгового дня с учетом событий                                |
| Volume        | int        | Объем торгов по данному активу за день                                                     |
| Ticker        | string     | Уникальный тикер актива (например, AAPL для Apple)                                         |
| Company Name  | string     | Полное название компании или товара, соответствующее тикеру                                |

---



### Описание признаков макроэкономических данных



Каждая строка датасета представляет макроэкономические показатели для рынка США на определённую дату. Признаки включают следующую информацию:



| Признак               | Тип данных | Описание                                                                                |
|-----------------------|------------|-----------------------------------------------------------------------------------------|
| GDP                   | float      | Валовое внутреннее производство (ВВП), измеряет экономическую активность США             |
| Unemployment Rate     | float      | Уровень безработицы в США, отражает состояние рынка труда                               |
| CPI                   | float      | Индекс потребительских цен, показывает уровень инфляции                                 |
| PMI                   | float      | Индекс промышленного производства, измеряет активность в обрабатывающем секторе         |
| Interest Rate         | float      | Ключевая процентная ставка, показывает стоимость заёмных средств                        |
| Trade Balance         | float      | Торговый баланс, отражает разницу между экспортом и импортом в США                      |
| Export                | float      | Объём экспорта товаров и услуг                                                          |
| Import                | float      | Объём импорта товаров и услуг                                                           |

---



### Количество объектов и период данных



- **Количество записей для каждого тикера:** варьируется в зависимости от длительности торгов (в среднем около 8,000 записей для каждого актива, начиная с 1990 года).  

- **Общий объем записей:** около 312,000 (суммарно для всех активов).  

- **Период данных:** С января 1990 года по текущую дату.

---




Все указанные макроэкономические показатели относятся к экономике США. Данные собраны через Yahoo Finance, FRED API (Federal Reserve Economic Data) — платформу, 
управляемую Федеральным резервным банком Сент-Луиса, которая предоставляет широкий спектр экономических и финансовых данных для США. 
Выбор этих показателей ориентирован на анализ американского рынка, поскольку США является крупнейшей мировой экономикой, и её макроэкономические показатели 
оказывают значительное влияние на глобальные финансовые рынки. При этом фондовые индексы, валютные курсы, процентные ставки, а также объемы торговли и инфляции 
в США напрямую влияют на динамику цен активов, как в самой стране, так и за её пределами.

В этом анализе мы создали датасет с историческими данными для различных классов активов, включая акции, сырьевые товары, индексы, облигации и валюты. 
Данные охватывают период с **1 января 1990 года по текущий день**. Мы использовали именно этот период, поскольку это обеспечивает достаточно длинный временной 
ряд для анализа долгосрочных тенденций, выявления корреляций и прогнозирования. Такой временной интервал позволяет учитывать значимые экономические циклы,
включая рецессии, кризисы и периоды роста, что делает прогнозы более надежными.



Данные загружены с помощью библиотеки `yfinance`, и для каждого актива загружены основные параметры: **дата, тикер, название компании, открытие, максимум, минимум, закрытие и объем торгов**.



#### Состав классов активов и причина выбора каждого



1. **Акции (Equities)**:

   - **Причина выбора**: Это одни из наиболее торгуемых акций на фондовом рынке США. Их данные широко доступны, и они представляют крупнейшие компании, которые оказывают значительное влияние на фондовый рынок и мировую экономику.

   - **Цель анализа**: Поскольку акции высоко волатильны и подвержены изменениям в зависимости от макроэкономических условий, анализ их временных рядов позволяет выявить долгосрочные тренды, сезонные паттерны и краткосрочные колебания.

   - **Список акций и их полные названия**:

      - **AAPL**: Apple Inc.

      - **MSFT**: Microsoft Corporation

      - **NVDA**: NVIDIA Corporation

      - **TSLA**: Tesla, Inc.

      - **AMZN**: Amazon.com, Inc.

      - **GOOG**: Alphabet Inc. (Google)

      - **META**: Meta Platforms, Inc. (Facebook)

      - **JPM**: JPMorgan Chase & Co.

      - **WMT**: Walmart Inc.

      - **NFLX**: Netflix, Inc.

      - **BABA**: Alibaba Group Holding Limited

      - **DIS**: The Walt Disney Company

      - **PFE**: Pfizer Inc.

      - **VZ**: Verizon Communications Inc.

      - **KO**: The Coca-Cola Company

      - **INTC**: Intel Corporation

      - **CSCO**: Cisco Systems, Inc.

      - **ADBE**: Adobe Inc.

      - **CMCSA**: Comcast Corporation

      - **T**: AT&T Inc.



2. **Сырьевые товары (Commodities)**:

   - **Причина выбора**: Сырьевые товары, такие как нефть и золото, являются основными экономическими активами, которые могут быть индикаторами инфляции, экономического роста и глобальной нестабильности.

   - **Цель анализа**: Цена на сырьевые товары подвержена значительным колебаниям в зависимости от глобальных экономических условий и событий (например, пандемий, войн, природных катастроф). Прогнозирование цен этих активов помогает лучше понять тренды в мировой экономике.

   - **Список сырьевых товаров и их полные названия**:

      - **CL=F**: Crude Oil Futures (нефть)

      - **GC=F**: Gold Futures (золото)

      - **SI=F**: Silver Futures (серебро)

      - **HG=F**: Copper Futures (медь)

      - **ZS=F**: Soybean Futures (соя)



3. **Индексы (Indices)**:

   - **Причина выбора**: Крупные фондовые индексы представляют широкий спектр рыночных активов и являются ключевыми индикаторами экономического состояния, рыночного настроения и делового цикла.

   - **Цель анализа**: Индексы показывают агрегированные изменения на рынке. Анализ временных рядов индексов помогает понять общее направление фондового рынка, а также выявить влияние внешних факторов на рыночные колебания.

   - **Список индексов и их полные названия**:

      - **^GSPC**: S&P 500 Index

      - **^DJI**: Dow Jones Industrial Average

      - **^IXIC**: NASDAQ Composite

      - **^RUT**: Russell 2000 Index

      - **^VIX**: Volatility Index (индекс волатильности, индикатор рыночных настроений)



4. **Облигации (Bond Indices)**:

   - **Причина выбора**: Доходности государственных облигаций США часто используются в качестве эталонных для оценки экономического здоровья, уровня инфляции и процентных ставок.

   - **Цель анализа**: Доходности облигаций являются важным индикатором для оценки экономической стабильности, уровня инфляции и прогноза будущих процентных ставок, что особенно полезно при анализе долгосрочных трендов.

   - **Список индексов облигаций и их полные названия**:

      - **^TNX**: 10-Year Treasury Yield Index (10-летние облигации)

      - **^IRX**: 13-Week Treasury Bill Yield Index (13-недельные казначейские облигации)

      - **^TYX**: 30-Year Treasury Yield Index (30-летние облигации)



5. **Валюты (Currencies)**:

   - **Причина выбора**: Валютные пары с долларом США отражают глобальные изменения на валютном рынке, влияние экономических и политических событий.

   - **Цель анализа**: Изучение динамики валютных курсов помогает в прогнозировании реакций мировых рынков на изменения процентных ставок, уровень инфляции и экономическую политику.

   - **Список валютных пар и их полные названия**:

      - **EURUSD=X**: Euro to USD Exchange Rate (евро/доллар)

      - **JPYUSD=X**: Japanese Yen to USD Exchange Rate (иена/доллар)

      - **GBPUSD=X**: British Pound to USD Exchange Rate (фунт/доллар)

      - **AUDUSD=X**: Australian Dollar to USD Exchange Rate (австралийский доллар/доллар)

      - **CADUSD=X**: Canadian Dollar to USD Exchange Rate (канадский доллар/доллар)

      - **CHFUSD=X**: Swiss Franc to USD Exchange Rate (швейцарский франк/доллар)

      - **CNYUSD=X**: Chinese Yuan to USD Exchange Rate (юань/доллар)

      - **SGDUSD=X**: Singapore Dollar to USD Exchange Rate (сингапурский доллар/доллар)

      - **HKDUSD=X**: Hong Kong Dollar to USD Exchange Rate (гонконгский доллар/доллар)



### Причины выбора периода с 1990 года по настоящее время

1. **Достаточный временной диапазон**: Период с 1990 года охватывает более 30 лет рыночных данных, что позволяет анализировать долгосрочные тенденции и выявить паттерны для всех типов активов.

2. **Экономические циклы**: Этот временной период включает множество экономических циклов и событий, таких как доткомовский пузырь (2000 г.), глобальный финансовый кризис (2008 г.), кризис COVID-19 (2020 г.), а также периоды экономического роста. Это позволяет учесть влияние различных факторов на цены активов.

3. **Доступность данных**: С 1990-х годов данные являются относительно доступными и точными, что позволяет получить надежные данные для всех типов активов.



Данный временной диапазон и выбранные активы помогут создать обоснованные прогнозы, изучить макроэкономические тренды и построить модель прогнозирования с учетом множества экономических факторов.

### Подробное описание выбора макроэкономических показателей для анализа



Для анализа влияния макроэкономических данных на динамику цен различных активов были выбраны следующие ключевые макроэкономические показатели: **ВВП**, **уровень безработицы**, **индекс потребительских цен (CPI)**, **индекс промышленного производства (PMI)**, **процентные ставки**, **торговый баланс**, а также **объемы экспорта и импорта**. Эти показатели дают комплексное представление о состоянии экономики и позволяют оценить взаимосвязь между макроэкономическими условиями и динамикой рынков.



#### 1. ВВП (GDP - Gross Domestic Product)

- **Описание**: Внутренний валовый продукт (ВВП) представляет собой совокупную стоимость всех товаров и услуг, произведенных в стране за определенный период. Это основной индикатор экономической активности и роста.

- **Причина выбора**: ВВП — это один из наиболее значимых макроэкономических показателей, который напрямую связан с деловым циклом и общей экономической активностью. Его рост или спад часто оказывает влияние на фондовые рынки, валютные курсы, сырьевые товары и спрос на облигации. Например, сильный рост ВВП обычно стимулирует повышение цен на акции, так как свидетельствует о росте компании и их доходов. 



#### 2. Уровень безработицы (Unemployment Rate)

- **Описание**: Показатель безработицы измеряет процент трудоспособного населения, которое не имеет работы и активно ее ищет. 

- **Причина выбора**: Уровень безработицы является индикатором здоровья рынка труда и общей экономической стабильности. Высокий уровень безработицы часто указывает на экономические проблемы, что может привести к снижению потребительских расходов и замедлению экономического роста. Это оказывает прямое влияние на фондовый рынок, валюту, облигации и может влиять на спрос на сырьевые товары. Например, рост безработицы часто негативно сказывается на акциях потребительского сектора и может приводить к падению валютного курса, так как ослабленная экономика привлекает меньше инвестиций.



#### 3. Индекс потребительских цен (CPI - Consumer Price Index)

- **Описание**: CPI измеряет изменения в ценах на корзину товаров и услуг, потребляемых домашними хозяйствами, и используется как основной индикатор инфляции.

- **Причина выбора**: Инфляция непосредственно влияет на покупательскую способность, потребительские расходы и процентные ставки. Высокая инфляция может снизить ценность облигаций, так как будущие выплаты становятся менее ценными, а также оказывает давление на центральные банки для повышения процентных ставок. Рост CPI также влияет на фондовые рынки: высокие уровни инфляции могут ограничить рост прибыли компаний из-за роста затрат. Цены на сырьевые товары, такие как золото, могут расти в периоды инфляции, поскольку они считаются защитными активами.



#### 4. Индекс промышленного производства (PMI - Industrial Production Index)

- **Описание**: PMI измеряет объем производства и активности в промышленном секторе и является показателем деловой активности.

- **Причина выбора**: Промышленное производство является важным индикатором экономической активности, так как показывает уровень спроса на продукцию. Снижение PMI может сигнализировать о замедлении экономического роста, что приводит к снижению цен на акции и сырьевые товары, такие как медь, используемые в производстве. В свою очередь, рост PMI может быть положительным сигналом для фондового рынка, так как свидетельствует об увеличении производственной активности и, следовательно, о росте корпоративной прибыли.



#### 5. Процентные ставки (Interest Rate)

- **Описание**: Основная процентная ставка, устанавливаемая центральным банком (например, Федеральной резервной системой США), оказывает влияние на стоимость кредитов и экономическую активность.

- **Причина выбора**: Процентные ставки напрямую влияют на фондовый рынок, рынок облигаций и валюты. Например, повышение процентных ставок может снижать интерес к акциям, так как увеличивает доходность облигаций и уменьшает доступность дешевых кредитов для компаний. Кроме того, высокая ставка делает валюту более привлекательной для инвесторов, что может привести к росту ее курса. Также высокая ставка может оказывать давление на потребление и инвестиции, снижая экономическую активность.



#### 6. Торговый баланс (Trade Balance)

- **Описание**: Торговый баланс представляет собой разницу между экспортом и импортом товаров и услуг в стране.

- **Причина выбора**: Торговый баланс отражает положение страны на мировой арене и может указывать на устойчивость или слабость экономики. Положительный торговый баланс (превышение экспорта над импортом) может укреплять валюту страны и положительно влиять на фондовый рынок, так как свидетельствует о конкурентоспособности и стабильности экономики. Отрицательный торговый баланс может приводить к девальвации валюты, так как страна вынуждена импортировать больше товаров, чем экспортирует.



#### 7. Объемы экспорта и импорта (Export and Import Data)

- **Описание**: Экспорт показывает объем товаров и услуг, продаваемых за границу, а импорт — объем товаров и услуг, покупаемых из-за рубежа.

- **Причина выбора**: Динамика экспорта и импорта является важным индикатором внешней торговли и конкурентоспособности экономики. Например, рост экспорта может означать высокий спрос на продукцию страны за границей, что поддерживает национальную валюту и фондовый рынок. В то же время рост импорта может оказывать давление на торговый баланс, снижая курс валюты. Анализ этих показателей важен для понимания влияния глобальных экономических условий на динамику цен активов внутри страны.



### Заключение



Все выбранные макроэкономические показатели тесно связаны с ценами активов, так как они отражают состояние экономики и влияют на ожидания инвесторов. Этот набор данных помогает понять, как экономические условия (рост, инфляция, занятость, торговый баланс) отражаются на фондовом рынке, рынке облигаций, сырьевых товарах и валютном рынке. Такой анализ позволяет не только строить прогнозы для отдельных классов активов, но и моделировать сложные взаимосвязи между экономическими переменными и ценами на активы, что делает прогнозы более точными и помогает принимать обоснованные инвестиционные решения.
